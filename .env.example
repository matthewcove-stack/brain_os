# BrainOS home hosting via Cloudflare Tunnel
# Copy to brain_os/.env and fill values (do not commit secrets)

# Cloudflare Tunnel token (Zero Trust -> Networks -> Tunnels -> your tunnel -> Install connector)
CLOUDFLARE_TUNNEL_TOKEN=PASTE_CLOUDFLARE_TUNNEL_TOKEN_HERE

# Auth: voice_web -> intent_normaliser
INTENT_SERVICE_TOKEN=CHANGE_ME_TO_A_LONG_RANDOM_TOKEN

# Auth: intent_normaliser -> notion_gateway (matches API_BEARER_TOKEN configured in notion_gateway)
GATEWAY_BEARER_TOKEN=CHANGE_ME_TO_A_LONG_RANDOM_TOKEN

# OpenAI (for transcription)
OPENAI_API_KEY=PASTE_OPENAI_KEY_HERE
TRANSCRIBE_MODEL=gpt-4o-mini-transcribe

# Public hostnames you configure inside the Cloudflare Tunnel
# These are used by the web client at BUILD time (Vite compile-time vars).
VITE_NORMALISER_BASE_URL=https://intake.example.com
VITE_TRANSCRIBE_BASE_URL=https://voice-api.example.com
VITE_PACKET_BASE_URL=https://voice-api.example.com
VITE_NORMALISER_BEARER_TOKEN=${INTENT_SERVICE_TOKEN}

# CORS for voice_api
VOICE_API_CORS_ORIGINS=https://voice.example.com
# CORS for intent_normaliser
INTENT_CORS_ORIGINS=https://voice.example.com

# intent_normaliser -> notion_gateway (internal docker network default is fine)
GATEWAY_BASE_URL=http://notion_gateway:5678/webhook

# intent_normaliser -> context_api (internal docker network)
CONTEXT_API_BASE_URL=http://context_api:8001
CONTEXT_API_BEARER_TOKEN=CHANGE_ME_TO_A_LONG_RANDOM_TOKEN
CONTEXT_API_RESEARCH_ENABLED=false
CONTEXT_API_RESEARCH_TOPIC_KEY=general
CONTEXT_API_RESEARCH_MAX_ITEMS=3
CONTEXT_API_RESEARCH_RECENCY_DAYS=30

# context_api research worker controls
RESEARCH_WORKER_ENABLED=true
RESEARCH_SOURCE_FAILURE_THRESHOLD=3
RESEARCH_SOURCE_COOLDOWN_MINUTES=60
RESEARCH_RUN_MAX_NEW_ITEMS=0
